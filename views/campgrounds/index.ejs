<% layout('layouts/boilerplate') -%>
<link rel="stylesheet" href="/styles/app.css">

  <div id="map" class="cluster-map"></div>
  <h1>All campgrounds</h1>
  <a href="/campgrounds/new">Add campground</a>
  <ul>
    <% for (camp of campgrounds) { %>
      <div class="card mb-3">
        <div class="row g-0">
          <div class="col-md-4">
            <img crossorigin="anonymous" src="<%= camp.images[0].path %>" class="card-img-top" alt="campground-img">
          </div>
          <div class="col-md-8 align-self-center d-flex justify-content-start">
            <div class="card-body">
              <h5 class="card-title">
                <%= camp.title %>
              </h5>
              <p class="card-text">
                <%= camp.description %>
              </p>
              <p class="card-text"><small class="text-body-secondary text-muted">
                  <%= camp.locaiton %>
                </small></p>
              <a class="btn btn-primary" href="/campgrounds/<%= camp._id %>">View</a>
            </div>
          </div>
        </div>
      </div>

      <% } %>
  </ul>

  <script>
    const mapToken = '<%- process.env.MAPTILER_API_KEY %>';
    // Add this script block to pass `camp` data to JavaScript 
    const camp = {features: <%- JSON.stringify(campgrounds) %>};
  </script>

  <script src="/scripts/clusterMap.js"></script>